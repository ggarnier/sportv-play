<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Evoluindo a experiência web no SporTV Play com React</title>

		<meta name="description" content="Ao projetar a nova plataforma de vídeos ao vivo no SporTV Play durante as Olimpíadas de 2016, com foco em maior desempenho e resiliência, construímos uma nova interface web com React e outras técnicas modernas de desenvolvimento front-end">
		<meta name="author" content="Guilherme Garnier">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<style>
			.reveal section img {
				border: 0;
				background-color: transparent;
				box-shadow: none;
			}
			.reveal li {
				word-break: break-word;
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				      <section data-markdown>
        <script type="text/template">
          # Evoluindo a experiência web no SporTV Play com React

## Guilherme Garnier

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Guilherme Garnier

## Globo.com

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Globosat Play](static/globosat-play-logo.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Canais](static/channels.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Arquitetura original](static/globosat-play-architecture.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Problemas

Componentes

![Components](static/globotv-ui-components.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Problemas

- Como padronizar?
- Como compartilhar?

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Sportv Play](static/sportv-play-logo.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Home](static/sportv-play-home-antiga.png)


        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Olimpíadas](static/logo-olimpiadas-rio-2016.jpg)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Oportunidade
- resolver problemas com componentes
  - atualização
  - padronização
  - compartilhamento
- rever a arquitetura

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Componentes

![Polymer](static/polymer.png)
![React](static/react.svg)
![Angular](static/angularjs.svg)
![Vue](static/vue.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![React](static/react.svg)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![React lifecycle](static/react-lifecycle.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Modelo declarativo

```js
// Declarativo, c/ jQuery
$("button").prop("disabled", true)

$("textarea").on("input", function() {
  if ($(this).val().length > 0) {
    $("button").prop("disabled", false)
  } else {
    $("button").prop("disabled", true)
  }
})
```

```js
// Imperativo, c/ React
class TweetBox extends Component {
  state = {
    text: ""
  }

  handleChange(event) {
    this.setState({ text: event.target.value })
  }

  render() {
    return (
      <div>
        <textarea onChange={this.handleChange}></textarea>
        <button disabled={this.state.text.length === 0}>Tweet</button>
      </div>
    )
  }
}
```

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![React components](static/react-components.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Globo Play](static/globo-play-logo.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Without BFF](static/no-bff-architecture.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Problemas

- Muitas APIs internas
- Muitas requisições
- Acoplamento entre apps antigas e novas

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Back-end for Front-end

![BFF](static/bff.png)

http://samnewman.io/patterns/architectural/bff/

http://philcalcado.com/2015/09/18/the_back_end_for_front_end_pattern_bff.html

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![With BFF](static/bff-architecture.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Vantagens

- APIs específicas
- Desacoplamento entre apps
- Otimização (menos requisições, payload menor)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Desvantagens

- duplicação de código
- duplicação de APIs

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Acoplamento

![BFF team ownership](static/bff-team-ownership.jpg)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          # Gerenciamento de estado

- usuário
- trial
- menu

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Redux](static/redux.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![Redux data flow](static/redux-data-flow.jpg)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ```js
import { createStore } from 'redux'

// Create reducer
counter(state = 0, action) => {
  switch (action.type) {
  case 'INCREMENT':
    return state + 1
  case 'DECREMENT':
    return state - 1
  default:
    return state
  }
}

// Create store
let store = createStore(counter)

// React to store changes
store.subscribe(() =>
  console.log(store.getState())
)

// Dispatch actions
store.dispatch({ type: 'INCREMENT' }) // 1
store.dispatch({ type: 'INCREMENT' }) // 2
store.dispatch({ type: 'DECREMENT' }) // 1
```

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![MobX](static/mobx.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ```js
import {observable, autorun} from 'mobx'

const counter = observable(0)

autorun(() => console.log(counter.get()))

counter.set(counter.get() + 1) // 1
counter.set(counter.get() + 1) // 2
counter.set(counter.get() - 1) // 1
```

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          ![](static/you-might-not-need-redux.png)

        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
          > "Redux offers a tradeoff..."

> "... if you’re just learning React, don’t make Redux your first choice."

        </script>
      </section>


			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				width: 1280,
				height: 800,
				margin: 0.1,
				controls: false,
				progress: false,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return true; } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return true; } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return true; }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
